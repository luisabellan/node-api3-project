"use strict";var express=require("express"),cors=require("cors"),router=express.Router(),posts=require("../posts/postDb"),users=require("../users/userDb");function validateUserId(){return function(t,s,r){users.getById(t.params.id).then(function(e){e?(t.user=e,r()):s.status(404).json({message:"invalid user id"})}).catch(function(e){r(e)})}}function validatePost(){return function(e,t,s){return e.body?e.body.message?void 0:t.status(400).json({message:"missing required text field"}):t.status(400).json({message:"missing post data"})}}router.get("",function(e,t){posts.get().then(function(e){t.status(200).json(e)}).catch(function(e){return console.log(e),t.status(500).json({error:"The posts information could not be retrieved."})})}),router.get("/:id",validateUserId(),function(e,t){posts.getById(e.params.id).then(function(e){return e?t.status(200).json(e):t.status(404).json({message:"The post with the specified ID does not exist."})}).catch(function(e){return console.log(e),t.status(500).json({error:"The post information could not be retrieved."})})}),router.delete("/:id",validateUserId(),function(e,t){users.remove(e.params.id).then(function(e){t.status(200).json({message:"The user has been deleted"})}).catch(function(e){next(e)})}),router.put("/:id",validateUserId(),function(e,t){if(!e.body.title||!e.body.contents)return t.status(400).json({errorMessage:"Please provide title and contents for the post."})}),module.exports=router;